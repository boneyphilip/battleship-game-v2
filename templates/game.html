{% extends "base.html" %}

{% block title %}Battleship - Browser Mode{% endblock %}

{% block content %}
<h1>BATTLESHIPS</h1>

<div class="status">
  ðŸŽ¯ Turn: Player |
  Enemy ships: {{ game.enemy_ships|length }} |
  Your ships: {{ game.player_ships|length }}
  <br/>
  Shots â€” Player: {{ game.total_player_shots }} | Enemy: {{ game.total_enemy_shots }}
</div>

{% if game.player_msg %}
  <div class="msg-player">ðŸ’¦ {{ game.player_msg }}</div>
{% endif %}

{% if game.enemy_msg %}
  <div class="msg-enemy">ðŸ’¦ {{ game.enemy_msg }}</div>
{% endif %}

<div class="boards-wrap">
  <div>
    <h2>Enemy Fleet</h2>
    <table class="board">
      <tr>
        <th></th>
        {% for c in range(game.size) %}
          <th>{{ c + 1 }}</th>
        {% endfor %}
      </tr>

      {% for r in range(game.size) %}
      <tr>
        <th>{{ chr(65 + r) }}</th>
        {% for c in range(game.size) %}
          <td>{{ game.enemy_view[r][c] }}</td>
        {% endfor %}
      </tr>
      {% endfor %}
    </table>
  </div>

  <div>
    <h2>Your Fleet</h2>
    <table class="board">
      <tr>
        <th></th>
        {% for c in range(game.size) %}
          <th>{{ c + 1 }}</th>
        {% endfor %}
      </tr>

      {% for r in range(game.size) %}
      <tr>
        <th>{{ chr(65 + r) }}</th>
        {% for c in range(game.size) %}
          <td>{{ game.player_board[r][c] }}</td>
        {% endfor %}
      </tr>
      {% endfor %}
    </table>
  </div>
</div>

<div class="fire-box">
  <h3>Enter position (e.g., A1)</h3>

  <form action="{{ url_for('fire') }}" method="POST">
    <input type="text" name="position" placeholder="A1" required>
    <button type="submit">Fire!</button>
  </form>

  <form action="{{ url_for('new_game') }}" method="POST" style="margin-top:12px;">
    <button type="submit">New Game</button>
  </form>
</div>

<div class="legend">
  Legend: ðŸ’¥=Hit  ðŸ’¦=Miss  ðŸŒŠ=Water  ðŸš¢=Player
</div>

{% endblock %}
